{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% translate 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label='MyCurrency' %}">MyCurrency</a>
&rsaquo; Currency Converter
</div>
{% endblock %}

{% block content %}
<div id="content-main">
    <h1>Currency Converter</h1>
    
    <div class="module">
        <form method="post" style="padding: 20px;">
            {% csrf_token %}
            {{ form.as_p }}
            <div class="submit-row">
                <input type="submit" value="Convert" class="default" name="_save">
            </div>
        </form>
    </div>

    {% if results %}
    <div class="module" style="margin-top: 20px;">
        <table style="width: 100%;">
            <thead>
                <tr>
                    <th>Source</th>
                    <th>Target</th>
                    <th>Rate</th>
                    <th>Converted Amount</th>
                </tr>
            </thead>
            <tbody>
                {% for res in results %}
                <tr class="{% cycle 'row1' 'row2' %}">
                    <td>{{ amount }} {{ source.code }}</td>
                    <td>{{ res.currency.code }} ({{ res.currency.name }})</td>
                    <td>{{ res.rate|floatformat:6 }}</td>
                    <td><strong>{{ res.converted|floatformat:2 }} {{ res.currency.symbol }}</strong></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
</div>

<style>
    form p label {
        display: inline-block;
        width: 160px;
        font-weight: bold;
    }
    input[type="number"], select {
        padding: 5px;
        border-radius: 4px;
        border: 1px solid #ccc;
    }
    .submit-row {
        margin-top: 20px;
        background: #f8f8f8;
        padding: 10px;
        border-top: 1px solid #eee;
    }
</style>
{% endblock %}
